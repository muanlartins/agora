<form [formGroup]="form" class="form">
  <mat-form-field class="form__input">
    <mat-label>Ano</mat-label>
    <mat-select formControlName="year">
      <mat-option>Remover Filtro</mat-option>
      <mat-option value="2023">2023</mat-option>
      <mat-option value="2024">2024</mat-option>
    </mat-select>
  </mat-form-field>
  <button class="form__button" mat-flat-button color="primary" (click)="openCreateDebateModal()">Criar</button>
</form>

<div style="position: relative; min-height: 500px;">
  <table class="table" mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>
    <tr class="table__head__tr" mat-header-row *matHeaderRowDef="columns"></tr>

    <ng-container [matColumnDef]="column" *ngFor="let column of columns; index as index">
      <th
        class="table__head__tr__th"
        [ngClass]="'table__header__tr__th--' + index"
        mat-header-cell
        *matHeaderCellDef
      >{{column}}</th>
      <td
        class="table__body__tr__td"
        [ngClass]="'table__body__tr__td--' + index"
        mat-cell
        *matCellDef="let element"
      >
        {{getColumnData(element, column)}}
      </td>
    </ng-container>

    <ng-container matColumnDef="detail">
      <td
        class="table__body__tr__td"
        mat-cell
        *matCellDef="let element"
        [attr.colspan]="columns.length"
      >
        <div
        class="table__body__tr__td__details"
          [@expandDetail]="element == expandedElement ? 'expanded' : 'collapsed'"
        >
          <div class="table__body__tr__td__details__detail" *ngFor="let detail of getDetails(element)">
            <div class="table__body__tr__td__details__detail__title">{{ detail.title }}</div>
            <div class="table__body__tr__td__details__detail__value">{{ detail.value }}</div>
            <div *ngIf="detail.detail" class="table__body__tr__td__details__detail__value">{{ detail.detail }}</div>
          </div>
        </div>
      </td>
    </ng-container>

    <tr
      class="table__body__tr"
      mat-row
      *matRowDef="let element; columns: columns"
      (click)="expandedElement = expandedElement === element ? null : element"
    ></tr>
    <tr
      class="table__body__tr table__body__tr--detail"
      mat-row
      *matRowDef="let row; columns: ['detail']"
    ></tr>
  </table>
  <app-spinner [loading]="loading" [fullscreen]="false"></app-spinner>
</div>
<!-- <mat-paginator pageSize="10" aria-label="Select page of users"></mat-paginator> -->
